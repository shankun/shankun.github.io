<!doctype html><html lang=zh_CN><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ä¸­æ–‡ç‰ˆç¬¬10ç« </title><link href=https://shankun.github.io/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://shankun.github.io/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=https://shankun.github.io/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><style>body{--primary-color:#5871a2;--primary-pale-color:#5871a210;--text-color:#3c4043;--text-pale-color:#94969f;--bg-color:#fff;--highlight-mark-color:#5f75b035;--callout-note-color:#5871a2;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460;--main-font:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--homepage-max-width:768px;--main-max-width:768px;--avatar-size:60px;--icon-size:20px;--homepage-font-size:16px;--homepage-line-height:1.75;--paragraph-font-size:16px;--paragraph-line-height:1.75;--aside-font-size:15px;--img-border-radius:0;--callout-border-radius:0;--detail-border-radius:0;--dark-mode-img-brightness:.75;--dark-mode-chart-brightness:.75;--inline-code-border-radius:2px;--inline-code-bg-color:var(--primary-pale-color);--block-code-border-radius:0;--block-code-border-color:var(--primary-color);--detail-border-color:var(--primary-color);--homepage-bg-image:url(https://shankun.github.io/img/greenBamboo.jpg)}body.dark{--primary-color:#5d77ac;--primary-pale-color:#5d77ac20;--text-color:#9197a5;--text-pale-color:#747983;--bg-color:#202124;--highlight-mark-color:#5f75b035;--callout-note-color:#5d77ac;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}</style><link href=https://shankun.github.io/main.css rel=stylesheet><link href=https://shankun.github.io/hl-light.css id=hl rel=stylesheet><link crossorigin href=https://fastly.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV rel=stylesheet><script crossorigin defer integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 src=https://fastly.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script><script crossorigin defer integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 src=https://fastly.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false},{left:'\\(',right:'\\)',display:false},{left:'\\[',right:'\\]',display:true}],throwOnError:false})})</script><body class=post><script>const theme = sessionStorage.getItem('theme');
    const match = window.matchMedia("(prefers-color-scheme: dark)").matches
    if ((theme && theme == 'dark') || (!theme && match)) {
      document.body.classList.add('dark');
      const hl = document.querySelector('link#hl');
      if (hl) hl.href = https://shankun.github.io/hl-dark.css;
    }</script><header class=blur><div id=header-wrapper><nav><a class=instant href=https://shankun.github.io>æ¯ä¸€å¤©éƒ½æ˜¯ç¦»åˆ«</a><button aria-label="toggle expand" class=separator id=toggler>ğŸš€</button><span class="wrap left fold">{</span><a class=instant href=https://shankun.github.io/posts>articles</a><span class="wrap-separator fold">,</span><a class="instant fold" href=https://shankun.github.io/projects>projects</a><span class="wrap right fold">} ;</span></nav><div id=btns><button aria-label="theme switch" data-moon-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>' data-sun-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>' id=theme-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill=currentColor></path></svg></button><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><div id=wrapper><div id=blank></div><aside><nav><ul><li><a class=h2 href=#di-10-zhang-applicative-functor>ç¬¬ 10 ç« ï¼šApplicative Functor</a> <ul><li><a class=h3 href=#ying-yong-applicative-functor>åº”ç”¨ applicative functor</a><li><a class=h3 href=#ping-zhong-zhi-chuan>ç“¶ä¸­ä¹‹èˆ¹</a><li><a class=h3 href=#xie-diao-yu-ji-li>åè°ƒä¸æ¿€åŠ±</a><li><a class=h3 href=#lift>lift</a><li><a class=h3 href=#cao-zuo-fu>æ“ä½œç¬¦</a></ul><li><a class=h2 href=#mian-fei-kai-ping-qi>å…è´¹å¼€ç“¶å™¨</a> <ul><li><a class=h3 href=#ding-lu>å®šå¾‹</a><li><a class=h3 href=#zong-jie>æ€»ç»“</a><li><a class=h3 href=#lian-xi>ç»ƒä¹ </a></ul></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside><main><div><div data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' id=copy-cfg style=display:none></div><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ä¸­æ–‡ç‰ˆç¬¬10ç« </h1><div id=post-info><div id=date><span id=publish>2023-11-21</span></div><div id=tags><a class=instant href=https://shankun.github.io/tags/programming><span>#</span>programming</a><a class=instant href=https://shankun.github.io/tags/javascript><span>#</span>javascript</a></div></div><p><a rel="nofollow noreferrer" href=https://mostly-adequate.gitbook.io/mostly-adequate-guide/ch10>åŸæ–‡é“¾æ¥</a> â€ƒâ€ƒ <a href=../mostly-adequate-guide/#mu-lu>è¿”å›ç›®å½•</a><h1 id=di-10-zhang-applicative-functor>ç¬¬ 10 ç« ï¼šApplicative Functor<a aria-label="Anchor link for: di-10-zhang-applicative-functor" class=zola-anchor href=#di-10-zhang-applicative-functor style=visibility:hidden>#</a></h1><h2 id=ying-yong-applicative-functor>åº”ç”¨ applicative functor<a aria-label="Anchor link for: ying-yong-applicative-functor" class=zola-anchor href=#ying-yong-applicative-functor style=visibility:hidden>#</a></h2><p>è€ƒè™‘åˆ°å…¶å‡½æ•°å¼çš„å‡ºèº«ï¼Œ<strong>applicative functor</strong> è¿™ä¸ªåç§°å ªç§°ç®€å•æ˜äº†ã€‚å‡½æ•°å¼ç¨‹åºå‘˜æœ€ä¸ºäººè¯Ÿç—…çš„ä¸€ç‚¹å°±æ˜¯ï¼Œæ€»å–œæ¬¢æä¸€äº›ç¨€å¥‡å¤æ€ªçš„å‘½åï¼Œæ¯”å¦‚ <code>mappend</code> æˆ–è€… <code>liftA4</code>ã€‚è¯šç„¶ï¼Œæ­¤ç±»åç§°å‡ºç°åœ¨æ•°å­¦å®éªŒå®¤æ˜¯å†è‡ªç„¶ä¸è¿‡çš„ï¼Œä½†æ˜¯æ”¾åœ¨å…¶ä»–ä»»ä½•è¯­å¢ƒä¸‹ï¼Œè¿™äº›æ¦‚å¿µå°±éƒ½åƒæ˜¯æ‰®ä½œè¾¾æ–¯ç»´è¾¾å»æ±½è½¦é¤é¦†ææ€ªçš„äººã€‚ï¼ˆè¯‘è€…æ³¨ï¼šæ­¤å¤„éœ€è¦åšäº›è§£é‡Šï¼Œ1. æ±½è½¦é¤é¦†ï¼ˆdrive-thruï¼‰æŒ‡çš„æ˜¯é‚£ç§ä¸éœ€è¦é¡¾å®¢ä¸‹è½¦å°±èƒ½æä¾›æœåŠ¡çš„åœ°æ–¹ï¼Œæ¯”å¦‚éº¦å½“åŠ³ã€æ˜Ÿå·´å…‹ç­‰å°±ä¼šæœ‰è¿™ç§ drive-thruï¼›2. è¾¾æ–¯ç»´è¾¾ï¼ˆDarth Vaderï¼‰æ˜¯ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ç³»åˆ—ä¸»è¦åæ´¾è§’è‰²ï¼Œåœ¨ç¾å›½å¤§ä¼—æ–‡åŒ–ä¸­çš„æœ‰ç€å¹¿æ³›çš„å½±å“åŠ›ï¼Œå…¶é€ å‹æ˜¯å¾ˆå¤šäººè‡´æ•¬æ¨¡ä»¿çš„å¯¹è±¡ï¼›3. ç”±äº 2 çš„ç¼˜æ•…ï¼Œç¾å›½ä¸€äº›æ˜Ÿæˆ˜è¿·ä¼šæ‰®ä½œ Darth Vader å» drive-thru ç‚¹å•ï¼ŒYouTube ä¸Šæœ‰ä¸å°‘è¿™ç§<a href="https://www.youtube.com/watch?v=eKVJZAMUh_A" rel="nofollow noreferrer">ææ€ªè§†é¢‘</a>ï¼›4. ä½œè€…ä½¿ç”¨è¿™ä¸ªâ€œå…¸æ•…â€æ˜¯ä¸ºäº†è¯´æ˜å‡½æ•°å¼é‡Œå¾ˆå¤šæ¦‚å¿µçš„åç§°æœ‰äº›â€œæ•…å¼„ç„è™šâ€ï¼Œè€Œ applicative functor æ˜¯å°‘æ•°æ¯”è¾ƒâ€œæ­£å¸¸â€çš„ã€‚ï¼‰<p>æ— è®ºå¦‚ä½•ï¼Œapplicative è¿™ä¸ªåå­—åº”è¯¥èƒ½å¤Ÿå‘æˆ‘ä»¬è¡¨æ˜ä¸€äº›äº‹å®ï¼Œå‘Šè¯‰æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œå®ƒèƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆï¼šé‚£å°±æ˜¯è®©ä¸åŒ functor å¯ä»¥ç›¸äº’åº”ç”¨ï¼ˆapplyï¼‰çš„èƒ½åŠ›ã€‚<p>ç„¶è€Œï¼Œä½ å¯èƒ½ä¼šé—®äº†ï¼Œä¸ºä½•ä¸€ä¸ªæ­£å¸¸çš„ã€ç†æ€§çš„äººï¼Œæ¯”å¦‚ä½ è‡ªå·±ï¼Œä¼šåšè¿™ç§â€œè®©ä¸åŒ functor ç›¸äº’åº”ç”¨â€çš„äº‹ï¼Ÿè€Œä¸”ï¼Œâ€œç›¸äº’åº”ç”¨â€åˆ°åº•<em>æ˜¯ä»€ä¹ˆæ„æ€</em>ï¼Ÿ<p>è¦å›ç­”è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢è¿™ä¸ªåœºæ™¯è®²èµ·ï¼Œå¯èƒ½ä½ å·²ç»ç¢°åˆ°è¿‡è¿™ç§åœºæ™¯äº†ã€‚å‡è®¾æœ‰ä¸¤ä¸ªåŒç±»å‹çš„ functorï¼Œæˆ‘ä»¬æƒ³æŠŠè¿™ä¸¤è€…ä½œä¸ºä¸€ä¸ªå‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ä¼ é€’è¿‡å»æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ç®€å•çš„ä¾‹å­æ¯”å¦‚è®©ä¸¤ä¸ª <code>Container</code> çš„å€¼ç›¸åŠ ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> è¿™æ ·æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º 2 å’Œ 3 éƒ½è—åœ¨ç“¶å­é‡Œã€‚</span>
<span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">add</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">NaN</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ä½¿ç”¨å¯é çš„ map å‡½æ•°è¯•è¯•</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">container_of_add_2</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Container(add(2))</span>
</span></code></pre><p>è¿™æ—¶å€™æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>Container</code>ï¼Œå®ƒå†…éƒ¨çš„å€¼æ˜¯ä¸€ä¸ªå±€éƒ¨è°ƒç”¨çš„ï¼ˆpartially appliedï¼‰çš„å‡½æ•°ã€‚ç¡®åˆ‡ç‚¹è®²å°±æ˜¯ï¼Œæˆ‘ä»¬æƒ³è®© <code>Container(add(2))</code> ä¸­çš„ <code>add(2)</code> åº”ç”¨åˆ° <code>Container(3)</code> ä¸­çš„ <code>3</code> ä¸Šæ¥å®Œæˆè°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æƒ³æŠŠä¸€ä¸ª functor åº”ç”¨åˆ°å¦ä¸€ä¸ªä¸Šã€‚<p>å·§çš„æ˜¯ï¼Œå®Œæˆè¿™ç§ä»»åŠ¡çš„å·¥å…·å·²ç»å­˜åœ¨äº†ï¼Œå³ <code>chain</code> å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥å…ˆ <code>chain</code> ç„¶åå† <code>map</code> é‚£ä¸ªå±€éƒ¨è°ƒç”¨çš„ <code>add(2)</code>ï¼Œå°±åƒè¿™æ ·ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">chain</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">two</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">add</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">two</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></code></pre><p>åªä¸è¿‡ï¼Œè¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ monad çš„é¡ºåºæ‰§è¡Œé—®é¢˜ï¼šæ‰€æœ‰çš„ä»£ç éƒ½åªä¼šåœ¨å‰ä¸€ä¸ª monad æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰æ‰§è¡Œã€‚æƒ³æƒ³çœ‹ï¼Œæˆ‘ä»¬çš„è¿™ä¸¤ä¸ªå€¼è¶³å¤Ÿå¼ºå¥ä¸”ç›¸äº’ç‹¬ç«‹ï¼Œå¦‚æœä»…ä»…ä¸ºäº†æ»¡è¶³ monad çš„é¡ºåºè¦æ±‚è€Œå»¶è¿Ÿ <code>Container(3)</code> çš„åˆ›å»ºï¼Œæˆ‘è§‰å¾—æ˜¯éå¸¸æ²¡æœ‰å¿…è¦çš„ã€‚<p>äº‹å®ä¸Šï¼Œå½“é‡åˆ°è¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œè¦æ˜¯èƒ½å¤Ÿæ— éœ€å€ŸåŠ©è¿™äº›ä¸å¿…è¦çš„å‡½æ•°å’Œå˜é‡ï¼Œä»¥ä¸€ç§ç®€æ˜æ‰¼è¦çš„æ–¹å¼æŠŠä¸€ä¸ª functor çš„å€¼åº”ç”¨åˆ°å¦ä¸€ä¸ªä¸Šå»å°±å¥½äº†ã€‚<h2 id=ping-zhong-zhi-chuan>ç“¶ä¸­ä¹‹èˆ¹<a aria-label="Anchor link for: ping-zhong-zhi-chuan" class=zola-anchor href=#ping-zhong-zhi-chuan style=visibility:hidden>#</a></h2><figure><img src=https://shankun.github.io/img/ship_in_a_bottle.jpg><figcaption><a href=http://hollycarden.deviantart.com>æ¥æº</a></figcaption></figure><p><code>ap</code> å°±æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œèƒ½å¤ŸæŠŠä¸€ä¸ª functor çš„å‡½æ•°å€¼åº”ç”¨åˆ°å¦ä¸€ä¸ª functor çš„å€¼ä¸Šã€‚æŠŠè¿™å¥è¯å¿«é€Ÿåœ°è¯´ä¸Š 5 éã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">add</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Container(5)</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> all together now</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Container(5)</span>
</span></code></pre><p>è¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ï¼Œè€Œä¸”ä»£ç å¹²å‡€æ•´æ´ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<code>Container(3)</code> ä»åµŒå¥—çš„ monad å‡½æ•°çš„ç‰¢ç¬¼ä¸­é‡Šæ”¾äº†å‡ºæ¥ã€‚éœ€è¦å†æ¬¡å¼ºè°ƒçš„æ˜¯ï¼Œæœ¬ä¾‹ä¸­çš„ <code>add</code> æ˜¯è¢« <code>map</code> æ‰€å±€éƒ¨è°ƒç”¨ï¼ˆpartially applyï¼‰çš„ï¼Œæ‰€ä»¥ <code>add</code> å¿…é¡»æ˜¯ä¸€ä¸ª curry å‡½æ•°ã€‚<p>å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ª <code>ap</code> å‡½æ•°ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-support z-class z-ts">Container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">prototype</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">other_container</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">other_container</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-language z-this z-ts">this</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">__value</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span>
</span></code></pre><p>è®°ä½ï¼Œ<code>this.__value</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¼šæ¥æ”¶å¦ä¸€ä¸ª functor ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€ <code>map</code> å®ƒã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡º applicative functor çš„å®šä¹‰ï¼š<blockquote><p>applicative functor æ˜¯å®ç°äº† <code>ap</code> æ–¹æ³•çš„ pointed functor</blockquote><p>æ³¨æ„ <code>pointed</code> è¿™ä¸ªå‰æï¼Œè¿™æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªå‰æï¼Œä¸‹é¢çš„ä¾‹å­ä¼šè¯´æ˜è¿™ä¸€ç‚¹ã€‚<p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘å·²ç»æ„Ÿå—åˆ°ä½ çš„ç–‘è™‘äº†ï¼ˆä¹Ÿæˆ–è€…æ˜¯å›°æƒ‘å’Œææƒ§ï¼‰ï¼›å¿ƒæ€å¼€æ”¾ç‚¹å˜›ï¼Œ<code>ap</code> è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚åœ¨æ·±å…¥ç†è§£è¿™ä¸ªæ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ¢ç´¢ä¸€ä¸ªç‰¹æ€§ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">F</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">F</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">F</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><p>è¿™è¡Œä»£ç ç¿»è¯‘æˆäººç±»è¯­è¨€å°±æ˜¯ï¼Œmap ä¸€ä¸ª <code>f</code> ç­‰ä»·äº <code>ap</code> ä¸€ä¸ªå€¼ä¸º <code>f</code> çš„ functorã€‚æˆ–è€…æ›´å¥½çš„è¯‘æ³•æ˜¯ï¼Œä½ æ—¢å¯ä»¥æŠŠ <code>x</code> æ”¾åˆ°å®¹å™¨é‡Œç„¶åè°ƒç”¨ <code>map(f)</code>ï¼Œä¹Ÿå¯ä»¥åŒæ—¶è®© <code>f</code> å’Œ <code>x</code> å‘ç”Ÿ liftï¼ˆå‚çœ‹ç¬¬ 8 ç« ï¼‰ï¼Œç„¶åå¯¹ä»–ä»¬è°ƒç”¨ <code>ap</code>ã€‚è¿™è®©æˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸€ç§ä»å·¦åˆ°å³çš„æ–¹å¼ç¼–å†™ä»£ç ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Maybe(5)</span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Task(5)</span>
</span></code></pre><p>ç»†å¿ƒçš„è¯»è€…å¯èƒ½å‘ç°äº†ï¼Œä¸Šè¿°ä»£ç ä¸­éšçº¦æœ‰æ™®é€šå‡½æ•°è°ƒç”¨çš„å½±å­ã€‚æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç¨åä¼šå­¦ä¹  <code>ap</code> çš„ pointfree ç‰ˆæœ¬ï¼›æš‚æ—¶å…ˆæŠŠè¿™å½“ä½œæ­¤ç±»ä»£ç çš„æ¨èå†™æ³•ã€‚é€šè¿‡ä½¿ç”¨ <code>of</code>ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½è¢«è¾“é€åˆ°äº†å„ä¸ªå®¹å™¨é‡Œçš„å¥‡å¹»ä¹‹åœ°ï¼Œå°±åƒæ˜¯åœ¨å¦ä¸€ä¸ªå¹³è¡Œä¸–ç•Œé‡Œï¼Œæ¯ä¸ªç¨‹åºéƒ½å¯ä»¥æ˜¯å¼‚æ­¥çš„æˆ–è€…æ˜¯ null æˆ–è€…éšä¾¿ä»€ä¹ˆå€¼ï¼Œè€Œä¸”ä¸ç®¡æ˜¯ä»€ä¹ˆï¼Œ<code>ap</code> éƒ½èƒ½åœ¨è¿™ä¸ªå¹³è¡Œä¸–ç•Œé‡Œé’ˆå¯¹è¿™äº›å€¼åº”ç”¨å„ç§å„æ ·çš„å‡½æ•°ã€‚è¿™å°±åƒæ˜¯åœ¨ä¸€ä¸ªç“¶å­ä¸­é€ èˆ¹ã€‚<p>ä½ æ³¨æ„åˆ°æ²¡ï¼Ÿä¸Šä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† <code>Task</code>ï¼Œè¿™æ˜¯ applicative functor ä¸»è¦çš„ç”¨æ­¦ä¹‹åœ°ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´æ·±å…¥çš„ä¾‹å­ã€‚<h2 id=xie-diao-yu-ji-li>åè°ƒä¸æ¿€åŠ±<a aria-label="Anchor link for: xie-diao-yu-ji-li" class=zola-anchor href=#xie-diao-yu-ji-li style=visibility:hidden>#</a></h2><p>å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæ—…æ¸¸ç½‘ç«™ï¼Œæ—¢éœ€è¦è·å–æ¸¸å®¢ç›®çš„åœ°çš„åˆ—è¡¨ï¼Œè¿˜éœ€è¦è·å–åœ°æ–¹äº‹ä»¶çš„åˆ—è¡¨ã€‚è¿™ä¸¤ä¸ªè¯·æ±‚å°±æ˜¯ç›¸äº’ç‹¬ç«‹çš„ api è°ƒç”¨ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Http.get :: String -> Task Error HTML</span>

<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">renderPage</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">destinations</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">events</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-comment z-block z-ts"><span class="z-punctuation z-definition z-comment z-ts">/*</span> render page <span class="z-punctuation z-definition z-comment z-ts">*/</span></span>  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">renderPage</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Http</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-dom z-ts">get</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>/destinations<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Http</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-dom z-ts">get</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>/events<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Task("&LTdiv>some page with dest and events&LT/div>")</span>
</span></code></pre><p>ä¸¤ä¸ªè¯·æ±‚å°†ä¼šåŒæ—¶ç«‹å³æ‰§è¡Œï¼Œå½“ä¸¤è€…çš„å“åº”éƒ½è¿”å›ä¹‹åï¼Œ<code>renderPage</code> å°±ä¼šè¢«è°ƒç”¨ã€‚è¿™ä¸ monad ç‰ˆæœ¬çš„é‚£ç§å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆæ‰èƒ½ç»§ç»­æ‰§è¡Œåé¢çš„æ“ä½œå®Œå…¨ä¸åŒã€‚æœ¬æ¥æˆ‘ä»¬å°±æ— éœ€æ ¹æ®ç›®çš„åœ°æ¥è·å–äº‹ä»¶ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ä¾èµ–é¡ºåºæ‰§è¡Œã€‚<p>å†æ¬¡å¼ºè°ƒï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä½¿ç”¨å±€éƒ¨è°ƒç”¨çš„å‡½æ•°æ¥è¾¾æˆä¸Šè¿°ç»“æœçš„ï¼Œæ‰€ä»¥å¿…é¡»è¦ä¿è¯ <code>renderpage</code> æ˜¯ curry å‡½æ•°ï¼Œå¦åˆ™å®ƒå°±ä¸ä¼šä¸€ç›´ç­‰åˆ°ä¸¤ä¸ª <code>Task</code> éƒ½å®Œæˆã€‚è€Œä¸”å¦‚æœä½ ç¢°å·§è‡ªå·±åšè¿‡ç±»ä¼¼çš„äº‹ï¼Œé‚£ä½ ä¸€å®šä¼šæ„Ÿæ¿€ <code>applicative functor</code> è¿™ä¸ªå¼‚å¸¸ç®€æ´çš„æ¥å£çš„ã€‚è¿™å°±æ˜¯é‚£ç§èƒ½å¤Ÿè®©æˆ‘ä»¬ç¦»â€œå¥‡ç‚¹â€ï¼ˆsingularityï¼‰æ›´è¿‘ä¸€æ­¥çš„ä¼˜ç¾ä»£ç ã€‚<p>å†æ¥çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> å¸®åŠ©å‡½æ•°ï¼š</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ==============</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  $ :: String -> IO DOM</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-entity z-name z-function z-ts">$</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">selector</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-new z-expr z-ts"><span class="z-keyword z-operator z-new z-ts">new</span> <span class="z-entity z-name z-type z-ts">IO</span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-support z-variable z-dom z-ts">document</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-dom z-ts">querySelector</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">selector</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span></span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  getVal :: String -> IO String</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">getVal</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">compose</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">prop</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>value<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-variable z-other z-readwrite z-ts">$</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Example:</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ===============</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  signIn :: String -> String -> Bool -> User</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">signIn</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">username</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">password</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">remember_me</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-comment z-block z-ts"><span class="z-punctuation z-definition z-comment z-ts">/*</span> signing in <span class="z-punctuation z-definition z-comment z-ts">*/</span></span>  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">signIn</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">getVal</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>#email<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">getVal</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>#password<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-language z-boolean z-false z-ts">false</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> IO({id: 3, email: "gg@allin.com"})</span>
</span></code></pre><p><code>signIn</code> æ˜¯ä¸€ä¸ªæ¥æ”¶ 3 ä¸ªå‚æ•°çš„ curry å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è°ƒç”¨ <code>ap</code> 3 æ¬¡ã€‚åœ¨æ¯ä¸€æ¬¡çš„ <code>ap</code> è°ƒç”¨ä¸­ï¼Œ<code>signIn</code> å°±æ”¶åˆ°ä¸€ä¸ªå‚æ•°ç„¶åè¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„å‚æ•°éƒ½ä¼ è¿›æ¥ï¼Œå®ƒä¹Ÿå°±æ‰§è¡Œå®Œæ¯•äº†ã€‚æˆ‘ä»¬å¯ä»¥ç»§ç»­æ‰©å±•è¿™ç§æ¨¡å¼ï¼Œå¤„ç†ä»»æ„å¤šçš„å‚æ•°ã€‚å¦å¤–ï¼Œå·¦è¾¹ä¸¤ä¸ªå‚æ•°åœ¨ä½¿ç”¨ <code>getVal</code> è°ƒç”¨åè‡ªç„¶è€Œç„¶åœ°æˆä¸ºäº†ä¸€ä¸ª <code>IO</code>ï¼Œä½†æ˜¯æœ€å³è¾¹çš„é‚£ä¸ªå´éœ€è¦æ‰‹åŠ¨ <code>lift</code>ï¼Œç„¶åå˜æˆä¸€ä¸ª <code>IO</code>ï¼Œè¿™æ˜¯å› ä¸º <code>ap</code> éœ€è¦è°ƒç”¨è€…åŠå…¶å‚æ•°éƒ½å±äºåŒä¸€ç±»å‹ã€‚<h2 id=lift>lift<a aria-label="Anchor link for: lift" class=zola-anchor href=#lift style=visibility:hidden>#</a></h2><p>ï¼ˆè¯‘è€…æ³¨ï¼šæ­¤å¤„åŸæ ‡é¢˜æ˜¯â€œBro, do you even lift?â€ï¼Œæ˜¯ä¸€æµè¡Œè¯­ï¼Œå‘æºäºå¥èº«åœˆï¼ŒæŒ‡è´¨ç–‘åˆ«äººçš„å¥èº«æ–¹å¼å’Œæ•ˆæœå¹¶æ˜¾ç¤ºä¼˜è¶Šæ„Ÿï¼Œåæ‰©æ•£è‡³å…¶ä»–é¢†åŸŸã€‚å†æ³¨ï¼šä½œè€…ä¹¦ä¸­ç”¨äº†ä¸å°‘æ­¤ç±»ä¿šè¯­æˆ–ä¿—è¯­ï¼Œæœ‰æ—¶å¹¶éåœ¨ä½¿ç”¨ä¿šè¯­çš„æœ¬æ„ï¼Œå°±åƒè¿™å¥ï¼Œå®Œå…¨å°±æ˜¯ä¸ºäº†å¥½ç©ã€‚å¦ï¼Œå…³äº lift çš„æ¦‚å¿µå¯å‚çœ‹ç¬¬ 8 ç« ã€‚ï¼‰<p>æˆ‘ä»¬æ¥è¯•è¯•ä»¥ä¸€ç§ pointfree çš„æ–¹å¼è°ƒç”¨ applicative functorã€‚å› ä¸º <code>map</code> ç­‰ä»·äº <code>of/ap</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰æ— æ•°ä¸ªèƒ½å¤Ÿ <code>ap</code> é€šç”¨å‡½æ•°ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">liftA2</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">functor1</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">functor2</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">functor1</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">functor2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">liftA3</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">functor1</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">functor2</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">functor3</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">functor1</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">functor2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">functor3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">liftA4, etc</span>
</span></code></pre><p><code>liftA2</code> æ˜¯ä¸ªå¥‡æ€ªçš„åå­—ï¼Œå¬èµ·æ¥åƒæ˜¯ç ´è´¥å·¥å‚é‡ŒæŒ‘å‰”çš„è´§è¿ç”µæ¢¯ï¼Œæˆ–è€…ä¼ªè±ªåæ±½è½¦å…¬å¸çš„ä¸ªæ€§è½¦ç‰Œã€‚ä¸è¿‡ä½ è¦æ˜¯çœŸæ­£ç†è§£äº†ï¼Œé‚£ä¹ˆå®ƒçš„å«ä¹‰ä¹Ÿå°±ä¸è¯è‡ªæ˜äº†ï¼šè®©é‚£äº›å°ä»£ç å—å‘ç”Ÿ liftï¼Œæˆä¸º applicative functor ä¸­çš„ä¸€å‘˜ã€‚<p>åˆšå¼€å§‹æˆ‘ä¹Ÿè§‰å¾—è¿™ç§ 2-3-4 çš„å†™æ³•æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œçœ‹èµ·æ¥åˆä¸‘åˆæ²¡æœ‰å¿…è¦ï¼Œæ¯•ç«Ÿæˆ‘ä»¬å¯ä»¥åœ¨ JavaScript ä¸­æ£€æŸ¥å‡½æ•°çš„å‚æ•°æ•°é‡ç„¶åå†åŠ¨æ€åœ°æ„é€ è¿™æ ·çš„å‡½æ•°ã€‚ä¸è¿‡ï¼Œå±€éƒ¨è°ƒç”¨ï¼ˆpartially applyï¼‰<code>liftA(N)</code> æœ¬èº«ï¼Œæœ‰æ—¶ä¹Ÿèƒ½å‘æŒ¥å®ƒçš„ç”¨å¤„ï¼Œè¿™æ ·çš„è¯ï¼Œå‚æ•°æ•°é‡å°±å›ºå®šäº†ã€‚<p>æ¥çœ‹çœ‹å®é™…ç”¨ä¾‹ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> checkEmail :: User -> Either String Email</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> checkName :: User -> Either String String</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  createUser :: Email -> String -> IO User</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">createUser</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">email</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">name</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-comment z-block z-ts"><span class="z-punctuation z-definition z-comment z-ts">/*</span> creating... <span class="z-punctuation z-definition z-comment z-ts">*/</span></span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Either</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">createUser</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">checkEmail</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">user</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">checkName</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">user</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Left("invalid email")</span>

<span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">liftA2</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">createUser</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">checkEmail</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">user</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">checkName</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">user</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Left("invalid email")</span>
</span></code></pre><p><code>createUser</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>liftA2</code>ã€‚ä¸Šè¿°ä¸¤ä¸ªè¯­å¥æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯ä½¿ç”¨äº† <code>liftA2</code> çš„ç‰ˆæœ¬æ²¡æœ‰æåˆ° <code>Either</code>ï¼Œè¿™å°±ä½¿å¾—å®ƒæ›´åŠ é€šç”¨çµæ´»ï¼Œå› ä¸ºä¸å¿…ä¸ç‰¹å®šçš„æ•°æ®ç±»å‹è€¦åˆåœ¨ä¸€èµ·ã€‚<p>æˆ‘ä»¬è¯•è¯•ä»¥è¿™ç§æ–¹å¼é‡å†™å‰ä¸€ä¸ªä¾‹å­ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">liftA2</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Maybe(5)</span>

<span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">liftA2</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">renderPage</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Http</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-dom z-ts">get</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>/destinations<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Http</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-dom z-ts">get</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>/events<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Task("&LTdiv>some page with dest and events&LT/div>")</span>

<span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">liftA3</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">signIn</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">getVal</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>#email<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">getVal</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>#password<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-language z-boolean z-false z-ts">false</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> IO({id: 3, email: "gg@allin.com"})</span>
</span></code></pre><h2 id=cao-zuo-fu>æ“ä½œç¬¦<a aria-label="Anchor link for: cao-zuo-fu" class=zola-anchor href=#cao-zuo-fu style=visibility:hidden>#</a></h2><p>åœ¨ haskellã€scalaã€PureScript ä»¥åŠ swift ç­‰è¯­è¨€ä¸­ï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ä¸­ç¼€æ“ä½œç¬¦ï¼ˆinfix operatorsï¼‰ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°åˆ°è¿™æ ·çš„è¯­æ³•ï¼š<pre class="language-hs z-code" data-lang=hs><code class=language-hs data-lang=hs><span class="z-source z-haskell"><span class="z-comment z-line z-double-dash z-haskell"><span class="z-punctuation z-definition z-comment z-haskell">--</span> haskell
</span>add <span class="z-keyword z-operator z-haskell"><$></span> <span class="z-constant z-other z-haskell">Right</span> <span class="z-constant z-numeric z-integer z-decimal z-haskell">2</span> <span class="z-keyword z-operator z-haskell"><</span>*<span class="z-keyword z-operator z-haskell">></span> <span class="z-constant z-other z-haskell">Right</span> <span class="z-constant z-numeric z-integer z-decimal z-haskell">3</span>
</span></code></pre><pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> JavaScript</span>
<span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">add</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">Right</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">Right</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><p><code><$></code> å°±æ˜¯ <code>map</code>ï¼ˆäº¦å³ <code>fmap</code>ï¼‰ï¼Œ<code><*></code> ä¸è¿‡å°±æ˜¯ <code>ap</code>ã€‚è¿™æ ·çš„è¯­æ³•ä½¿å¾—å¼€å‘è€…å¯ä»¥ä»¥ä¸€ç§æ›´è‡ªç„¶çš„é£æ ¼æ¥ä¹¦å†™å‡½æ•°å¼åº”ç”¨ï¼Œè€Œä¸”ä¹Ÿèƒ½å‡å°‘ä¸€äº›æ‹¬å·ã€‚<h1 id=mian-fei-kai-ping-qi>å…è´¹å¼€ç“¶å™¨<a aria-label="Anchor link for: mian-fei-kai-ping-qi" class=zola-anchor href=#mian-fei-kai-ping-qi style=visibility:hidden>#</a></h1><figure><img src=https://shankun.github.io/img/canopener.jpg><figcaption><a href=http://breannabeckmeyer.com/drawing.html>æ¥æº</a></figcaption></figure><p>æˆ‘ä»¬å°šæœªå¯¹è¡ç”Ÿå‡½æ•°ï¼ˆderived functionï¼‰ç€å¢¨è¿‡å¤šã€‚ä¸è¿‡çœ‹åˆ°æœ¬ä¹¦ä»‹ç»çš„æ‰€æœ‰è¿™äº›æ¥å£éƒ½äº’ç›¸ä¾èµ–å¹¶éµå®ˆä¸€äº›å®šå¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸€äº›å¼ºæ¥å£æ¥å®šä¹‰ä¸€äº›å¼±æ¥å£äº†ã€‚<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ª applicative é¦–å…ˆæ˜¯ä¸€ä¸ª functorï¼Œæ‰€ä»¥å¦‚æœå·²ç»æœ‰ä¸€ä¸ª applicative å®ä¾‹çš„è¯ï¼Œæ¯«æ— ç–‘é—®å¯ä»¥ä¾æ­¤å®šä¹‰ä¸€ä¸ª functorã€‚<p>è¿™ç§å®Œç¾çš„è®¡ç®—ä¸Šçš„å¤§å’Œè°ï¼ˆcomputational harmonyï¼‰ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è·Ÿä¸€ä¸ªæ•°å­¦â€œæ¡†æ¶â€æ‰“äº¤é“ã€‚å“ªæ€•æ˜¯è«æ‰ç‰¹åœ¨å°æ—¶å€™å°±ä¸‹è½½äº† abletonï¼ˆè¯‘è€…æ³¨ï¼šä¸€æ¬¾ä¸“ä¸šçš„éŸ³ä¹åˆ¶ä½œè½¯ä»¶ï¼‰ï¼Œä»–çš„é’¢ç´ä¹Ÿä¸å¯èƒ½å¼¹å¾—æ›´å¥½ã€‚<p>å‰é¢æåˆ°è¿‡ï¼Œ<code>of/ap</code> ç­‰ä»·äº <code>map</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ç‚¹æ¥å®šä¹‰ <code>map</code>ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ä» of/ap è¡ç”Ÿå‡ºçš„ map</span>
<span class="z-support z-class z-ts">X</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">prototype</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-language z-this z-ts">this</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">constructor</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-language z-this z-ts">this</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span>
</span></code></pre><p>monad å¯ä»¥è¯´æ˜¯å¤„åœ¨é£Ÿç‰©é“¾çš„é¡¶ç«¯ï¼Œå› æ­¤å¦‚æœå·²ç»æœ‰äº†ä¸€ä¸ª <code>chain</code> å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å…è´¹å¾—åˆ° functor å’Œ applicativeï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ä» chain è¡ç”Ÿå‡ºçš„ map</span>
<span class="z-support z-class z-ts">X</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">prototype</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">m</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-variable z-language z-this z-ts">this</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">m</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">chain</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">a</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
    <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">m</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">constructor</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">f</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">a</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ä» chain/map è¡ç”Ÿå‡ºçš„ ap</span>
<span class="z-support z-class z-ts">X</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-ts">prototype</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">other</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-language z-this z-ts">this</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">chain</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
    <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">other</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">map</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></code></pre><p>å®šä¹‰ä¸€ä¸ª monadï¼Œå°±æ—¢èƒ½å¾—åˆ° applicative ä¹Ÿèƒ½å¾—åˆ° functorã€‚è¿™ä¸€ç‚¹éå¸¸å¼ºå¤§ï¼Œç›¸å½“äºè¿™äº›â€œå¼€ç“¶å™¨â€å…¨éƒ½æ˜¯å…è´¹çš„ï¼æˆ‘ä»¬ç”šè‡³å¯ä»¥å®¡æŸ¥ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œç„¶åè‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚<p>åº”è¯¥è¦æŒ‡å‡ºæ¥çš„ä¸€ç‚¹æ˜¯ï¼Œ<code>ap</code> çš„é­…åŠ›æœ‰ä¸€éƒ¨åˆ†å°±æ¥è‡ªäºå¹¶è¡Œçš„èƒ½åŠ›ï¼Œæ‰€ä»¥é€šè¿‡ <code>chain</code> æ¥å®šä¹‰å®ƒå°±å¤±å»äº†è¿™ç§ä¼˜åŒ–ã€‚å³ä¾¿å¦‚æ­¤ï¼Œå¼€å‘è€…åœ¨è®¾è®¡å‡ºæœ€ä½³å®ç°çš„è¿‡ç¨‹ä¸­å°±èƒ½æœ‰ä¸€ä¸ªç«‹å³å¯ç”¨çš„æ¥å£ï¼Œä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚<p>ä¸ºå•¥ä¸ç›´æ¥ä½¿ç”¨ monadï¼Ÿå› ä¸ºæœ€å¥½ç”¨åˆé€‚çš„åŠ›é‡æ¥è§£å†³åˆé€‚çš„é—®é¢˜ï¼Œä¸€åˆ†ä¸å¤šï¼Œä¸€åˆ†ä¸å°‘ã€‚è¿™æ ·å°±èƒ½é€šè¿‡æ’é™¤å¯èƒ½çš„åŠŸèƒ½æ€§æ¥åšåˆ°æœ€å°åŒ–è®¤çŸ¥è´Ÿè·ã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œç›¸æ¯” monadï¼Œæˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨ applicativeã€‚<p>å‘ä¸‹çš„åµŒå¥—ç»“æ„ä½¿å¾— monad æ‹¥æœ‰ä¸²è¡Œè®¡ç®—ã€å˜é‡èµ‹å€¼å’Œæš‚ç¼“åç»­æ‰§è¡Œç­‰ç‹¬ç‰¹çš„èƒ½åŠ›ã€‚ä¸è¿‡è§è¯†åˆ° applicative çš„å®é™…ç”¨ä¾‹ä¹‹åï¼Œä½ å°±ä¸å¿…å†è€ƒè™‘ä¸Šé¢è¿™äº›é—®é¢˜äº†ã€‚<p>ä¸‹é¢ï¼Œæ¥çœ‹çœ‹ç†è®ºçŸ¥è¯†ã€‚<h2 id=ding-lu>å®šå¾‹<a aria-label="Anchor link for: ding-lu" class=zola-anchor href=#ding-lu style=visibility:hidden>#</a></h2><p>å°±åƒæˆ‘ä»¬æ¢ç´¢è¿‡çš„å…¶ä»–æ•°å­¦ç»“æ„ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ç¼–ç ä¸­ä¹Ÿä¾èµ– applicative functor ä¸€äº›æœ‰ç”¨çš„ç‰¹æ€§ã€‚é¦–å…ˆï¼Œä½ åº”è¯¥çŸ¥é“ applicative functor æ˜¯â€œç»„åˆå…³é—­â€ï¼ˆclosed under compositionï¼‰çš„ï¼Œæ„å‘³ç€ <code>ap</code> æ°¸è¿œä¸ä¼šæ”¹å˜å®¹å™¨ç±»å‹ï¼ˆå¦ä¸€ä¸ªèƒœè¿‡ monad çš„åŸå› ï¼‰ã€‚è¿™å¹¶ä¸æ˜¯è¯´æˆ‘ä»¬æ— æ³•æ‹¥æœ‰å¤šç§ä¸åŒçš„ä½œç”¨â€”â€”æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥æŠŠä¸åŒçš„ç±»å‹å‹æ ˆçš„ï¼Œåªä¸è¿‡æˆ‘ä»¬çŸ¥é“å®ƒä»¬å°†ä¼šåœ¨æ•´ä¸ªåº”ç”¨çš„è¿‡ç¨‹ä¸­ä¿æŒä¸å˜ã€‚<p>ä¸‹é¢çš„ä¾‹å­å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts">  <span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">tOfM</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">compose</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">of</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-variable z-other z-object z-ts">Maybe</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">of</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

  <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">liftA2</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">concat</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">tOfM</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>Rainy Days and Mondays<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">tOfM</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span> always get me down<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-whitespace z-comment z-leading z-ts">  </span><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> Task(Maybe(Rainy Days and Mondays always get me down))</span>
</span></code></pre><p>ä½ çœ‹ï¼Œä¸å¿…æ‹…å¿ƒä¸åŒçš„ç±»å‹ä¼šæ··åˆåœ¨ä¸€èµ·ã€‚<p>è¯¥å»çœ‹çœ‹æˆ‘ä»¬æœ€å–œæ¬¢çš„èŒƒç•´å­¦å®šå¾‹äº†ï¼š<em>åŒä¸€å¾‹</em>ï¼ˆidentityï¼‰ã€‚<h3 id=tong-yi-lu-identity>åŒä¸€å¾‹ï¼ˆidentityï¼‰<a aria-label="Anchor link for: tong-yi-lu-identity" class=zola-anchor href=#tong-yi-lu-identity style=visibility:hidden>#</a></h3><pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> åŒä¸€å¾‹</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">id</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-variable z-other z-readwrite z-ts">v</span>
</span></code></pre><p>æ˜¯çš„ï¼Œå¯¹ä¸€ä¸ª functor åº”ç”¨ <code>id</code> å‡½æ•°ä¸ä¼šæ”¹å˜ <code>v</code> é‡Œçš„å€¼ã€‚æ¯”å¦‚ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">v</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Identity</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>Pillow Pets<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Identity</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">id</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-variable z-other z-readwrite z-ts">v</span>
</span></code></pre><p><code>Identity.of(id)</code> çš„â€œæ— ç”¨æ€§â€è®©æˆ‘ä¸ç¦èå°”ã€‚è¿™é‡Œæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰è¯æ˜äº†çš„ï¼Œ<code>of/ap</code> ç­‰ä»·äº <code>map</code>ï¼Œå› æ­¤è¿™ä¸ªåŒä¸€å¾‹éµå¾ªçš„æ˜¯ functor çš„åŒä¸€å¾‹ï¼š<code>map(id) == id</code>ã€‚<p>ä½¿ç”¨è¿™äº›å®šå¾‹çš„ä¼˜ç¾ä¹‹å¤„åœ¨äºï¼Œå°±åƒä¸€ä¸ªå¯Œæœ‰æ¿€æƒ…çš„å¹¼å„¿å›­å¥èº«æ•™ç»ƒè®©æ‰€æœ‰çš„å°æœ‹å‹éƒ½èƒ½æ„‰å¿«åœ°ä¸€å—ç©è€ä¸€æ ·ï¼Œå®ƒä»¬èƒ½å¤Ÿå¼ºè¿«æ‰€æœ‰çš„æ¥å£éƒ½èƒ½å®Œç¾ç»“åˆã€‚<h3 id=tong-tai-homomorphism>åŒæ€ï¼ˆhomomorphismï¼‰<a aria-label="Anchor link for: tong-tai-homomorphism" class=zola-anchor href=#tong-tai-homomorphism style=visibility:hidden>#</a></h3><pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> åŒæ€</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">f</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">f</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><p><em>åŒæ€</em>å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¿æŒç»“æ„çš„æ˜ å°„ï¼ˆstructure preserving mapï¼‰ã€‚å®é™…ä¸Šï¼Œfunctor å°±æ˜¯ä¸€ä¸ªåœ¨ä¸åŒèŒƒç•´é—´çš„åŒæ€ï¼Œå› ä¸º functor åœ¨ç»è¿‡æ˜ å°„ä¹‹åä¿æŒäº†åŸå§‹èŒƒç•´çš„ç»“æ„ã€‚<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¸è¿‡æ˜¯æŠŠæ™®é€šçš„å‡½æ•°å’Œå€¼æ”¾è¿›äº†ä¸€ä¸ªå®¹å™¨ï¼Œç„¶ååœ¨é‡Œé¢è¿›è¡Œå„ç§è®¡ç®—ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯æŠŠæ‰€æœ‰çš„è®¡ç®—éƒ½æ”¾åœ¨å®¹å™¨é‡Œï¼ˆç­‰å¼å·¦è¾¹ï¼‰ï¼Œè¿˜æ˜¯å…ˆåœ¨å¤–é¢è¿›è¡Œè®¡ç®—ç„¶åå†æ”¾åˆ°å®¹å™¨é‡Œï¼ˆç­‰å¼å³è¾¹ï¼‰ï¼Œå…¶ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚<p>ä¸€ä¸ªç®€å•ä¾‹å­ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Either</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">toUpper</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Either</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>oreos<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Either</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">toUpper</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>oreos<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><h3 id=hu-huan-interchange>äº’æ¢ï¼ˆinterchangeï¼‰<a aria-label="Anchor link for: hu-huan-interchange" class=zola-anchor href=#hu-huan-interchange style=visibility:hidden>#</a></h3><p>äº’æ¢ï¼ˆinterchangeï¼‰è¡¨æ˜çš„æ˜¯é€‰æ‹©è®©å‡½æ•°åœ¨ <code>ap</code> çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹å‘ç”Ÿ lift æ˜¯æ— å…³ç´§è¦çš„ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> äº’æ¢</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">v</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">f</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><p>è¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼š<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">v</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">reverse</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">x</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>Sparklehorse<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">v</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">Task</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">f</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">f</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><h3 id=zu-he-composition>ç»„åˆï¼ˆcompositionï¼‰<a aria-label="Anchor link for: zu-he-composition" class=zola-anchor href=#zu-he-composition style=visibility:hidden>#</a></h3><p>æœ€åæ˜¯ç»„åˆã€‚ç»„åˆä¸è¿‡æ˜¯åœ¨æ£€æŸ¥æ ‡å‡†çš„å‡½æ•°ç»„åˆæ˜¯å¦é€‚ç”¨äºå®¹å™¨å†…éƒ¨çš„å‡½æ•°è°ƒç”¨ã€‚<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ç»„åˆ</span>
<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">A</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">compose</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">u</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">w</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">u</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">v</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">w</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></code></pre><pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">u</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">toUpper</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">v</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-ts">concat</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>& beyond<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">w</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>blood bath <span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">IO</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">of</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">compose</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">u</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">v</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-function-call z-ts"><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">w</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-keyword z-operator z-comparison z-ts">==</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">u</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">v</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">ap</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">w</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span>
</span></code></pre><h2 id=zong-jie>æ€»ç»“<a aria-label="Anchor link for: zong-jie" class=zola-anchor href=#zong-jie style=visibility:hidden>#</a></h2><p>å¤„ç†å¤šä¸ª functor ä½œä¸ºå‚æ•°çš„æƒ…å†µï¼Œæ˜¯ applicative functor ä¸€ä¸ªéå¸¸å¥½çš„åº”ç”¨åœºæ™¯ã€‚å€ŸåŠ© applicative functorï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ functor çš„ä¸–ç•Œé‡Œè°ƒç”¨å‡½æ•°ã€‚å°½ç®¡å·²ç»å¯ä»¥é€šè¿‡ monad è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½†åœ¨ä¸éœ€è¦ monad çš„ç‰¹å®šåŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ›´å€¾å‘äºä½¿ç”¨ applicative functorã€‚<p>è‡³æ­¤æˆ‘ä»¬å·²ç»åŸºæœ¬ä»‹ç»å®Œå®¹å™¨çš„ api äº†ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•å¯¹å‡½æ•°è°ƒç”¨ <code>map</code>ã€<code>chain</code> å’Œ <code>ap</code>ã€‚ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ›´å¥½åœ°å¤„ç†å¤šä¸ª functorï¼Œä»¥åŠå¦‚ä½•ä»¥ä¸€ç§åŸåˆ™æ€§çš„æ–¹å¼æ‹†è§£å®ƒä»¬ã€‚<p><a href=../mostly-adequate-guide-ch11/>Chapter 11: Transformation Again, Naturally</a><h2 id=lian-xi>ç»ƒä¹ <a aria-label="Anchor link for: lian-xi" class=zola-anchor href=#lian-xi style=visibility:hidden>#</a></h2><pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-function-call z-ts"><span class="z-support z-function z-ts">require</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>./support<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">Task</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-support z-function z-ts">require</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>data.task<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">_</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-support z-function z-ts">require</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>ramda<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> æ¨¡æ‹Ÿæµè§ˆå™¨çš„ localStorage å¯¹è±¡</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">localStorage</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-objectliteral z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span><span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>



<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ç»ƒä¹  1</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ==========</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨ Maybe å’Œ ap() å®ç°è®©ä¸¤ä¸ªå¯èƒ½æ˜¯ null çš„æ•°å€¼ç›¸åŠ ã€‚</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  ex1 :: Number -> Number -> Maybe Number</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-entity z-name z-function z-ts">ex1</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">x</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">y</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>

<span class="z-punctuation z-definition z-block z-ts">}</span></span></span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>


<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ç»ƒä¹  2</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ==========</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ª Maybe ä¸ºå‚æ•°ï¼Œè®©å®ƒä»¬ç›¸åŠ ã€‚ä½¿ç”¨ liftA2 ä»£æ›¿ ap()ã€‚</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  ex2 :: Maybe Number -> Maybe Number -> Maybe Number</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">ex2</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-constant z-language z-undefined z-ts">undefined</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>



<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ç»ƒä¹  3</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ==========</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> è¿è¡Œ getPost(n) å’Œ getComments(n)ï¼Œä¸¤è€…éƒ½è¿è¡Œå®Œæ¯•åæ‰§è¡Œæ¸²æŸ“é¡µé¢çš„æ“ä½œã€‚ï¼ˆå‚æ•° n å¯ä»¥æ˜¯ä»»æ„å€¼ï¼‰ã€‚</span>

<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">makeComments</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">reduce</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">acc</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">c</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-variable z-other z-readwrite z-ts">acc</span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>&LTli><span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-variable z-other z-readwrite z-ts">c</span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>&LT/li><span class="z-punctuation z-definition z-string z-end z-ts">"</span></span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span><span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">render</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">p</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">cs</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>&LTdiv><span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-variable z-other z-object z-ts">p</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-dom z-ts">title</span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>&LT/div><span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-keyword z-operator z-arithmetic z-ts">+</span><span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">makeComments</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-variable z-other z-readwrite z-ts">cs</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  ex3 :: Task Error HTML</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">ex3</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-constant z-language z-undefined z-ts">undefined</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>



<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ç»ƒä¹  4</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> ==========</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> å†™ä¸€ä¸ª IOï¼Œä»ç¼“å­˜ä¸­è¯»å– player1 å’Œ player2ï¼Œç„¶åå¼€å§‹æ¸¸æˆã€‚</span>

<span class="z-variable z-other z-object z-ts">localStorage</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">player1</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>toby<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-variable z-other z-object z-ts">localStorage</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-property z-ts">player2</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>sally<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-entity z-name z-function z-ts">getCache</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">x</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-new z-expr z-ts"><span class="z-keyword z-operator z-new z-ts">new</span> <span class="z-entity z-name z-type z-ts">IO</span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-variable z-other z-readwrite z-ts">localStorage</span><span class="z-meta z-array z-literal z-ts"><span class="z-meta z-brace z-square z-ts">[</span><span class="z-variable z-other z-readwrite z-ts">x</span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span></span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">game</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">_</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">curry</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">p1</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">p2</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-variable z-other z-readwrite z-ts">p1</span> <span class="z-keyword z-operator z-arithmetic z-ts">+</span> <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span> vs <span class="z-punctuation z-definition z-string z-end z-ts">'</span></span> <span class="z-keyword z-operator z-arithmetic z-ts">+</span> <span class="z-variable z-other z-readwrite z-ts">p2</span><span class="z-punctuation z-terminator z-statement z-ts">;</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>

<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts">  ex4 :: IO String</span>
<span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">var</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">ex4</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-constant z-language z-undefined z-ts">undefined</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>





<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> å¸®åŠ©å‡½æ•°</span>
<span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> =====================</span>

<span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-definition z-function z-ts"><span class="z-entity z-name z-function z-ts">getPost</span></span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">i</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-new z-expr z-ts"><span class="z-keyword z-operator z-new z-ts">new</span> <span class="z-entity z-name z-type z-ts">Task</span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">rej</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">res</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
    <span class="z-meta z-function-call z-ts"><span class="z-support z-function z-ts">setTimeout</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">res</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-objectliteral z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts">id</span></span><span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts"><span class="z-punctuation z-separator z-key-value z-ts">:</span></span> <span class="z-variable z-other z-readwrite z-ts">i</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts">title</span></span><span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts"><span class="z-punctuation z-separator z-key-value z-ts">:</span></span> <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>Love them futures<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span> </span><span class="z-punctuation z-definition z-block z-ts">}</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">300</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span>

<span class="z-meta z-function z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-definition z-function z-ts"><span class="z-entity z-name z-function z-ts">getComments</span></span><span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">i</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
  <span class="z-keyword z-control z-flow z-ts">return</span> <span class="z-new z-expr z-ts"><span class="z-keyword z-operator z-new z-ts">new</span> <span class="z-entity z-name z-type z-ts">Task</span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-variable z-parameter z-ts">rej</span><span class="z-punctuation z-separator z-parameter z-ts">,</span> <span class="z-variable z-parameter z-ts">res</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
    <span class="z-meta z-function-call z-ts"><span class="z-support z-function z-ts">setTimeout</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function z-expression z-ts"><span class="z-storage z-type z-function z-ts">function</span> <span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
      <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">res</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-array z-literal z-ts"><span class="z-meta z-brace z-square z-ts">[</span><span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>This book should be illegal<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>Monads are like space burritos<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
    <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">300</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
  <span class="z-punctuation z-definition z-block z-ts">}</span></span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span>
</span></code></pre></article><div class=giscus></div><script async crossorigin data-category=Announcements data-category-id=DIC_kwDOKg3Pks4CacrE data-emit-metadata=0 data-input-position=top data-lang=zh-CN data-loading=lazy data-mapping=pathname data-reactions-enabled=1 data-repo=shankun/shankun.github.io data-repo-id=R_kgDOKg3Pkg data-strict=0 data-theme=light src=https://giscus.app/client.js></script></div><footer><div class=copyright><p>Â© 2025 ShanKun</div><div class=credits>powered by <a rel="noreferrer noopener" href=https://www.getzola.org target=_blank>zola</a> and <a rel="noreferrer noopener" href=https://github.com/isunjn/serene target=_blank>serene</a></div></footer></main></div><script src=https://shankun.github.io/js/lightense.min.js></script><script src=https://shankun.github.io/js/main.js></script>